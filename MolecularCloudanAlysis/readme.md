# clonder

分子雲のfitsデータから空洞候補を自動で発見します.

これにより,分子雲中の空洞を用いた研究が加速することを祈る.

## 手法

2手法を用いて空洞を特定します.

* 1 : x-yプロファイリング

空洞の上下左右方向には空洞の中心と同程度かそれ以下の明るさのピクセルが集中していることに注目して,画像中から値の低いピクセルを中心として,x,y軸に垂直にデータを集めます.

* 2 : グラフ解析

空洞の中心であるならば,3D空間において前後フレーム的関係が存在することに注目し,プロファイリングしたデータをグラフ化したうえでそのグラフの解析をすることでグラフが示しているものが空洞か否か判定します.

## 解説

* 中心推定

##まず何より先にこれを実装するべき.

画像中の値を小さい順に並べ,その中の小さい値のうち,ある(x,y)を中心としてx,y方向に任意マス分進み,両方向のグラフにおいて,中心とした(x,y)が最小値であれば円の中心として判断する.


## to-do

ぼかしなしで,バウンディングボックスからある程度中心を推定できる関数を作る.

## 問題点
* 現在,プロファイリングしたデータをグラフ化する際にx軸はx軸専用の定数で,y軸はy軸専用の定数で通常化しているが,このパラメータを統一するべきか.

→統一するべきではない.求めたいのは本当に小さい値であるかどうかのみであり,別のデータから持ってきた定数を持ってきて作用させた際に,別のデータにはない値が作用させたデータに入っている場合壊れてしまうから.

* 実際の空洞は中央が完全に黒というわけではなく,周囲とまとまって中央となっている.しかし,データがとても大きく細かいところまで見えるため実際の空洞なのかノイズなのか区別できなくなっている.ぼかして情報量を調整してやるべきか.

→調整するべきだが,画像中の値の分布を考慮してフィルターを設計してやる必要がある.また,検出可能性の照明が先であるため,当分は有名どころのフィルターを使い,有用であることがわかってから自作のフィルターを用いる.

* プロファイリングを,x,y,zの三軸で行うべきか.
→行うべきである.しかし,今の状態ではオーダーがとんでもないことになるので,正規化した上で圧縮し,それを組み立てた三次元体からプロファイリングを行うと,人間にわかりやすいrecommendができるようになる.

* 標準化する時の方法が分からない.
→今は多分線形で標準化しているけれど,fvやds9で表示させた結果とかなり異なる画像が生成されており,対数,平方根など様々な手法を用いて標準化することができる.どれを使うべきか.

* 負数もそのままeを底とする対数でとってるけどこれ大丈夫なの?
→負数はeを底とすると対数をとることができた....10を底とするとやっぱりできないので,最小値を0とし,さらに1を足した値に対して10と2を底とする対数をとった.


